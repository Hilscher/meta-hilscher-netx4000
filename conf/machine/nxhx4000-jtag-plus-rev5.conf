#@TYPE: Machine
#@NAME: NXHX4000-JTAG+ board
#@DESCRIPTION: Machine configuration for the Hilscher NXHX4000-JTAG+ board
#@MAINTAINER: Hilscher Gesellschaft fuer Systemautomation mbH

require conf/machine/include/netx4000.inc

BAREBOX_DEVICETREE ?= "netx4000/nxhx4000-jtag-plus-rev5.dtb"
KERNEL_DEVICETREE ?= "netx4000/nxhx4000-jtag-plus-rev5.dtb"
KERNEL_DEVICETREE_OVERLAYS ?= " \
	netx4000/overlays/adc0.dtbo \
	netx4000/overlays/adc1.dtbo \
	netx4000/overlays/i2c1.dtbo:x1800-i2c.dtbo \
	netx4000/overlays/nxhx4000-rev3-spi0.dtbo:x1800-spi.dtbo \
	netx4000/overlays/can0.dtbo:x1602-can.dtbo \
	netx4000/overlays/uart1.dtbo:x1601-uart.dtbo \
"

DDR_RAM ?= "AS4C512M16D3L_12_2GIB"
ENABLE_DDR_ECC ?= "yes"
SERIAL_CONSOLES = "115200;ttyAMA0"

IMAGE_CLASSES_append += "image-sdimg"
IMAGE_FSTYPES ?= "sdimg tar.bz2"
# Automatic resizing of rootfs partition on first boot
ROOTFS_PART_AUTORESIZE ?= "1"

# Use USB function port as serial console.
KERNEL_MODULE_AUTOLOAD_append_pn-linux-stable += "g_serial"
KERNEL_MODULE_AUTOLOAD_append_pn-linux-stable-rt += "g_serial"
SERIAL_CONSOLES += "115200;ttyGS0"
